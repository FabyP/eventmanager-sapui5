/*!
* OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/base/Log"],function(e){"use strict";var t=window.Element;if(t.prototype.getAttributeNames==undefined){t.prototype.getAttributeNames=function(){var e=this.attributes;var t=e.length;var o=new Array(t);for(var n=0;n<t;n++){o[n]=e[n].name}return o}}var o=document.createElement("span"),n,r={registerTag:function e(t,o,n){o=o+"-";var r=o+t;s.apply(this,[r,n])},coreInstance:null};function c(){if(typeof window.CustomEvent==="function"){return false}function e(e,t){t=t||{bubbles:false,cancelable:false,detail:undefined};var o=document.createEvent("CustomEvent");o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return o}e.prototype=window.Event.prototype;window.CustomEvent=e}function a(e,t,n){var r=new window.CustomEvent(t),c=e.getAttribute("on-"+t);r.data=n;if(c){o.setAttribute("onclick",c);e.addEventListener(t,o.onclick)}e.dispatchEvent(r)}function i(){var t={childList:true,subtree:true};function o(e,t){e.forEach(function(e){if(e.type=="childList"){var t=e.addedNodes,o=e.removedNodes,n,r,c,a,i;for(c=0;c<t.length;c++){n=t[c];if(!document.createCustomElement._querySelector){return}if(n.tagName&&document.createCustomElement.hasOwnProperty(n.tagName.toLowerCase())){if(!n._control){document.createCustomElement[n.tagName.toLowerCase()].connectToNode(n)}n._control._connectedCallback()}if(n.tagName){a=n.querySelectorAll(document.createCustomElement._querySelector);for(i=0;i<a.length;i++){r=a[i];if(r.tagName&&document.createCustomElement.hasOwnProperty(r.tagName.toLowerCase())){if(!r._control){document.createCustomElement[r.tagName.toLowerCase()].connectToNode(r)}r._control._connectedCallback()}}}}for(c=0;c<o.length;c++){n=o[c];if(!document.createCustomElement._querySelector){return}if(n._control){n._control._disconnectedCallback()}if(n.tagName){a=n.querySelectorAll(document.createCustomElement._querySelector);for(i=0;i<a.length;i++){r=a[i];if(r._control){r._control._disconnectedCallback()}}}}}else if(e.type==="attributes"&&e.target&&e.target._control){e.target._control._changeProperty.call(e.target._control,e.attributeName,e.target.getAttribute(e.attributeName))}})}var n=new window.MutationObserver(o);if(!document.body){e.error("CustomElements.js was loaded before a body element was present in the DOM. Ensure to load CustomElements.js after the document was parsed, i.e. after the windows onload event.");return null}n.observe(document.body,t);return n}function l(e){if(typeof e!=="string"){return false}try{JSON.parse(e);return true}catch(e){return false}}function s(e,t){if(document.createCustomElement[e]){return document.createCustomElement[e]}var o=t.getMetadata(),c=o.getAllProperties(),i=o.getAllAssociations(),s=o.getEvents(),u={};Object.keys(c).map(function(e){u[e.toLowerCase()]=c[e]});Object.keys(i).map(function(e){u[e.toLowerCase()]=i[e]});Object.keys(s).map(function(e){u["on-"+e.toLowerCase()]=s[e]});var d=function(e){this._node=e;e._control=this;d.initCloneNode(e);d.defineProperties(e);this._controlImpl=this._controlImpl||new t;this._changeProperties(e);this._uiArea=r.coreInstance.createUIArea(e);this._uiArea.addContent(this._controlImpl);if(d.isInActiveDocument(e)){this._connectedCallback()}Object.keys(s).map(function(t){this._controlImpl[s[t]._sMutator](function(o){a(e,t,o)})}.bind(this));return e};d.cloneNode=function(){var e=this._cloneNode.call(this);e.removeAttribute("data-sap-ui-area");e.removeAttribute("id");e._controlImpl=this._control._controlImpl.clone();d.connectToNode(e);return e};d.initCloneNode=function(e){if(!e._cloneNode){e._cloneNode=e.cloneNode;e.cloneNode=d.cloneNode}};d.isInActiveDocument=function(e){return!!(e.parentNode&&e.ownerDocument===document)};d.defineProperty=function(e,t,n){Object.defineProperty(e,t,{get:function(){return o.getProperty(t).get(e._control._controlImpl)},set:function(n){e._control._changeProperty(t,n);return o.getProperty(t).get(e._control._controlImpl)}})};d.defineProperties=function(e){for(var t in u){if(t.charAt(0)!=="_"){d.defineProperty(e,t,u[t].defaultValue)}}};d.observer=n;d.connectToNode=function(e){new d(e);return d.observer&&d.observer.observe(e,{attributes:true})};d.prototype._connectedCallback=function(){this._connected||(this._connected=true)&&this._controlImpl.invalidate()};d.prototype._disconnectedCallback=function(){this._connected=false};d.prototype._changeProperties=function(e){var t=e.getAttributeNames();for(var o=0;o<t.length;o++){this._changeProperty(t[o],e.getAttribute(t[o]))}};d.prototype._changeProperty=function(e,t){var o=this._controlImpl,n=u[e];if(e==="id"){return}if(n&&(n._iKind===0||n._iKind===3)){var r=n.getType();var c=r.parseValue(t);var a=n.get(o);if(e==="manifest"&&r.getName()==="any"&&l(c)){c=JSON.parse(c)}if(r.isValid(c)){n.set(o,c)}else{n.set(o,a)}}else if(e==="class"){var i=t.split(" ");this._addedClasses=this._addedClasses||[];this._addedClasses.forEach(function(e){if(e){o.removeStyleClass(e)}});i.forEach(function(e){e=o.addStyleClass(e)});this._addedClasses=i}};d.prototype.fireCustomEvent=function(e,t){a(this._node,e,t)};var m=document.createCustomElement;m[e]=d;if(m._querySelector){m._querySelector+=","}else{Object.defineProperty(m,"_querySelector",{enumerable:false,writable:true});m._querySelector=""}var f=e.replace("-","\\-");m._querySelector+=f;var p=document.querySelectorAll(f);for(var _=0;_<p.length;_++){var v=p[_];m[e].connectToNode(v)}return d}if(!document.createCustomElement){document.createCustomElement=function(e){var t=document.createElement(e);document.createCustomElement[e].connectToNode(t);return t}}c();n=i();return r});