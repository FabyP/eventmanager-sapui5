/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/Control","./library","sap/ui/core/ResizeHandler","./AlignedFlowLayoutRenderer","sap/ui/dom/units/Rem"],function(e,t,i,o,r,n){"use strict";var s=t.extend("sap.ui.layout.AlignedFlowLayout",{metadata:{library:"sap.ui.layout",properties:{minItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"12rem"},maxItemWidth:{type:"sap.ui.core.AbsoluteCSSSize",defaultValue:"24rem"}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},endContent:{type:"sap.ui.core.Control",multiple:true}}}});s.prototype.init=function(){this._sResizeListenerId=o.register(this,this.onResize.bind(this))};s.prototype.exit=function(){if(this._sResizeListenerId){o.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};s.prototype._onRenderingOrThemeChanged=function(){var t=this.getDomRef(),i=this.getDomRef("endItem"),o=this.getContent().length&&t&&i;if(o){var r=window.getComputedStyle(t,null),n=r.getPropertyValue("padding-top"),s=i.style;if(e.getConfiguration().getRTL()){s.left=r.getPropertyValue("padding-left")}else{s.right=r.getPropertyValue("padding-right")}s.bottom=n}this.reflow({domRef:t,endItemDomRef:i})};s.prototype.onAfterRendering=s.prototype._onRenderingOrThemeChanged;s.prototype.onThemeChanged=s.prototype._onRenderingOrThemeChanged;s.prototype.onResize=function(e){if(e&&e.size.width!==e.oldSize.width){this.reflow()}};s.prototype.reflow=function(t){if(this.getContent().length===0){return}t=t||{};var i=t.domRef||this.getDomRef();if(!i||!i.offsetParent){return}var o=this.getRenderer().CSS_CLASS+"OneLine",r=true;var n=t.endItemDomRef||this.getDomRef("endItem"),s=this.getLastItemDomRef();if(n&&s){var f=i.lastElementChild,a=f.style;a.width="";a.height="";a.display="";i.classList.remove(o);var l=n.offsetHeight,p=n.offsetWidth,h=s.offsetTop,d=s.offsetLeft,g,u;if(e.getConfiguration().getRTL()){u=d}else{var m=d+s.offsetWidth;u=i.offsetWidth-m}r=u>=p;if(r){if(this.checkItemsWrapping(i)){if(n.offsetTop<h){a.height=Math.max(0,l-h)+"px";if(s.offsetTop>=n.offsetTop){g=n.offsetLeft;d=s.offsetLeft;if(g>=d&&g<=d+s.offsetWidth){a.height=l+"px"}}a.display="block"}else{a.height="0";a.display=""}}else{if(n.offsetTop<h){a.height=l+"px"}a.display="block"}}else{a.height=l+"px";a.display="block"}var c=p+"px";a.width=c;a.minWidth=c}var y={excludeEndItem:true};if(this.checkItemsWrapping(i,y)){i.classList.remove(o)}else{i.classList.add(o)}};s.prototype.checkItemsWrapping=function(e,t){e=e||this.getDomRef();if(!e){return false}var i={excludeEndItem:false};t=Object.assign(i,t);var o=e.firstElementChild,r=this.getLastItemDomRef();if(!o||!r){return false}var n=o.offsetTop,s=r.offsetTop,f=o.offsetHeight;if(s>=n+f){return true}if(t.excludeEndItem){return false}var a=this.getDomRef("endItem");return!!a&&a.offsetTop>=n+f};s.prototype.getLastItemDomRef=function(){var e=this.getContent(),t=e.length;if(t){var i=e[t-1],o=i.getDomRef();if(o){return o.parentElement}}return null};s.prototype.getLastVisibleDomRef=function(){return this.getDomRef("endItem")||this.getLastItemDomRef()};s.prototype.getNumberOfSpacers=function(){var e=this.getContent().length;if(e===0){return 0}var t=e,i=this.getMinItemWidth(),o;if(i.lastIndexOf("rem")!==-1){o=n.toPx(i)}else if(i.lastIndexOf("px")!==-1){o=parseFloat(i)}if(o){var r=Math.max(document.documentElement.clientWidth,window.screen.width);t=Math.abs(r/o)}t=Math.min(t,e-1);t=Math.max(1,t);t=Math.floor(t);return t};return s});